Options +MultiViews
Header set Content-Security-Policy "default-src 'self'; style-src-elem 'self' fonts.googleapis.com; font-src 'self' fonts.gstatic.com"

RewriteEngine On
DirectoryIndex html/index.html

RewriteRule ^users-page/?$ html/users.html [L]
RewriteRule ^users-page\.html$ html/users.html [L]

# API routes - MUST come before HTML routes
RewriteRule ^api/abbreviations/search php/controllers/abbreviation-search-controller.php [L]
RewriteRule ^api/abbreviations php/controllers/abbreviation-controller.php [L]
RewriteRule ^api/meanings php/controllers/meaning-controller.php [L]
RewriteRule ^api/all-users/search/?$ php/controllers/users-controller.php [L]
RewriteRule ^api/all-users/change-role/?$ php/controllers/users-controller.php [L]
RewriteRule ^api/all-users/delete/?$ php/controllers/users-controller.php [L]
RewriteRule ^api/all-users/?$ php/controllers/users-controller.php [L]
RewriteRule ^api/users php/controllers/user-controller.php [L]
RewriteRule ^api/abbr-lists php/controllers/abbreviation-list-controller.php [L]
RewriteRule ^api/dashboard/filters php/controllers/dashboard-controller.php [L]
RewriteRule ^api/dashboard php/controllers/dashboard-controller.php [L]
RewriteRule ^api/statistics php/controllers/statistics-controller.php [L]
RewriteRule ^api/rss php/controllers/rss-controller.php [L]
RewriteRule ^api/logout php/logout.php [L]
RewriteRule ^api/profile/update-own-credentials$ php/controllers/profile-controller.php [L]
RewriteRule ^api/profile/update-credentials$ php/controllers/profile-controller.php [L]
RewriteRule ^api/profile/picture$ php/controllers/profile-controller.php [L]
RewriteRule ^api/profile/update$ php/controllers/profile-controller.php [L]
RewriteRule ^api/profile$ php/controllers/profile-controller.php [L]
RewriteRule ^api/contributions/update/?$ php/controllers/contributions-controller.php [L]
RewriteRule ^api/contributions/delete/?$ php/controllers/contributions-controller.php [L]
RewriteRule ^api/contributions/?$ php/controllers/contributions-controller.php [L]
RewriteRule ^api/contributions-debug/?$ php/controllers/contributions-debug.php [L]

# HTML file redirects - handle both with and without .html extension
RewriteRule ^register/?$ html/register.html [L]
RewriteRule ^register\.html$ html/register.html [L]
RewriteRule ^main/?$ html/main.html [L]
RewriteRule ^main\.html$ html/main.html [L]
RewriteRule ^create-abbreviation/?$ html/create-abbreviation.html [L]
RewriteRule ^create-abbreviation\.html$ html/create-abbreviation.html [L]
RewriteRule ^stats/?$ html/stats.html [L]
RewriteRule ^stats\.html$ html/stats.html [L]
RewriteRule ^my_abbreviations/?$ html/my_abbreviations.html [L]
RewriteRule ^my_abbreviations\.html$ html/my_abbreviations.html [L]
RewriteRule ^all_abbreviations/?$ html/all_abbreviations.html [L]
RewriteRule ^all_abbreviations\.html$ html/all_abbreviations.html [L]
RewriteRule ^profile/?$ html/profile.html [L]
RewriteRule ^profile\.html$ html/profile.html [L]
RewriteRule ^mylist/?$ html/mylist.html [L]
RewriteRule ^mylist\.html$ html/mylist.html [L]
RewriteRule ^viewlist/?$ html/viewlist.html [L]
RewriteRule ^viewlist\.html$ html/viewlist.html [L]
RewriteRule ^contributions/?$ html/contributions.html [L]