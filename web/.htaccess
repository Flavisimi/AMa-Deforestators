Options +MultiViews
RewriteEngine On
DirectoryIndex html/index.html

# API routes - MUST come before HTML routes
RewriteRule ^api/abbreviations/search php/controllers/abbreviation-search-controller.php [L]
RewriteRule ^api/abbreviations php/controllers/abbreviation-controller.php [L]
RewriteRule ^api/meanings php/controllers/meaning-controller.php [L]
RewriteRule ^api/users php/controllers/user-controller.php [L]
RewriteRule ^api/abbr-lists php/controllers/abbreviation-list-controller.php [L]
RewriteRule ^api/dashboard php/controllers/dashboard-controller.php [L]
RewriteRule ^api/statistics php/controllers/statistics-controller.php [L]
RewriteRule ^api/rss php/controllers/rss-controller.php [L]
RewriteRule ^api/profile/picture php/controllers/profile-controller.php [L]
RewriteRule ^api/profile/update php/controllers/profile-controller.php [L]
RewriteRule ^api/profile php/controllers/profile-controller.php [L]
RewriteRule ^api/test-picture test-picture.php [L]

# Legacy API routes (without /api prefix) for backward compatibility
RewriteRule ^abbreviations/search php/controllers/abbreviation-search-controller.php [L]
RewriteRule ^abbreviations php/controllers/abbreviation-controller.php [L]
RewriteRule ^meanings php/controllers/meaning-controller.php [L]
RewriteRule ^users php/controllers/user-controller.php [L]
RewriteRule ^abbr-lists php/controllers/abbreviation-list-controller.php [L]
RewriteRule ^dashboard php/controllers/dashboard-controller.php [L]
RewriteRule ^statistics php/controllers/statistics-controller.php [L]
RewriteRule ^rss php/controllers/rss-controller.php [L]
RewriteRule ^profile/update php/controllers/profile-controller.php [L]

# HTML file redirects - handle both with and without .html extension
RewriteRule ^register/?$ html/register.html [L]
RewriteRule ^register\.html$ html/register.html [L]
RewriteRule ^main/?$ html/main.html [L]
RewriteRule ^main\.html$ html/main.html [L]
RewriteRule ^create-abbreviation/?$ html/create-abbreviation.html [L]
RewriteRule ^create-abbreviation\.html$ html/create-abbreviation.html [L]
RewriteRule ^stats/?$ html/stats.html [L]
RewriteRule ^stats\.html$ html/stats.html [L]
RewriteRule ^my_abbreviations/?$ html/my_abbreviations.html [L]
RewriteRule ^my_abbreviations\.html$ html/my_abbreviations.html [L]
RewriteRule ^all_abbreviations/?$ html/all_abbreviations.html [L]
RewriteRule ^all_abbreviations\.html$ html/all_abbreviations.html [L]
RewriteRule ^profile/?$ html/profile.html [L]
RewriteRule ^profile\.html$ html/profile.html [L]
RewriteRule ^mylist/?$ html/mylist.html [L]
RewriteRule ^mylist\.html$ html/mylist.html [L]
RewriteRule ^viewlist/?$ html/viewlist.html [L]
RewriteRule ^viewlist\.html$ html/viewlist.html [L]